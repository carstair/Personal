- name: Generar reporte en pantalla (vía raw) de FortiGate
  hosts: FORTI1
  gather_facts: no
  vars:
    fecha: "{{ lookup('pipe', 'date +%Y-%m-%d') }}"
  tasks:

    - name: Obtener SYSTEM STATUS
      raw: get system status
      register: system_status

    - name: Obtener PERFORMANCE STATUS
      raw: get system performance status
      register: performance_status

    - name: Obtener SESSION STATUS
      raw: get system session status
      register: session_status

    - name: Obtener HARDWARE STATUS
      raw: get hardware status
      register: hardware_status

    - name: Mostrar reporte formateado y legible
      debug:
        msg: |
          ══════════════════════════════════════════════════════
          ▸ REPORTE SEMANAL FORTIGATE
          ▸ Fecha : {{ fecha }}
          ▸ Equipo: {{ inventory_hostname }}
          ══════════════════════════════════════════════════════

          ▶ SYSTEM STATUS
          {% for line in system_status.stdout_lines %}{{ line }}
          {% endfor %}

          ▶ PERFORMANCE STATUS
          {% for line in performance_status.stdout_lines %}{{ line }}
          {% endfor %}

          ▶ SESSION STATUS
          {% for line in session_status.stdout_lines %}{{ line }}
          {% endfor %}

          ▶ HARDWARE STATUS
          {% for line in hardware_status.stdout_lines %}{{ line }}
          {% endfor %}

          ══════════════════════════════════════════════════════


